# Add whiptcl.so to all and use -fPIC flag for snackmodule
diff -urNad newt-0.52.14-orig/Makefile.in newt-0.52.14/Makefile.in
--- newt-0.52.14-orig/Makefile.in	2011-11-11 13:00:15.000000000 +0200
+++ newt-0.52.14/Makefile.in	2012-10-06 16:44:36.000000000 +0300
@@ -59,7 +59,7 @@
 TARGET=depend $(PROGS)
 endif
 
-all:	$(TARGET) _snackmodule.so
+all:	$(TARGET) _snackmodule.so whiptcl.so
 
 test:	test.o $(LIBNEWT)
 	$(CC) -g -o test test.o $(LIBNEWT) $(LDFLAGS) $(LIBS)
@@ -83,8 +83,8 @@
 			PIFLAGS=`$$ver-config --includes`; \
 			PLDFLAGS=`$$ver-config --ldflags`; \
 			PLFLAGS=`$$ver-config --libs`; \
-	        $(CC) $(CPPFLAGS) $$PIFLAGS $$PCFLAGS -c -o $$ver/snackmodule.o snackmodule.c ;\
-	        $(CC) --shared $$PLDFLAGS $$PLFLAGS $(LDFLAGS) -o $$ver/_snackmodule.so $$ver/snackmodule.o -L.  -lnewt $(LIBS);\
+	        $(CC) $(CPPFLAGS) $$PIFLAGS $$PCFLAGS -fPIC -c -o $$ver/snackmodule.o snackmodule.c ;\
+	        $(CC) --shared -fPIC $$PLDFLAGS $$PLFLAGS $(LDFLAGS) -o $$ver/_snackmodule.so $$ver/snackmodule.o -L.  -lnewt $(LIBS);\
 	done || :
 	touch $@
 
